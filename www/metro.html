<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" ;/>

    <script type="text/javascript" src="static/js/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="static/js/DBase.js"></script>
    <style>
        #svgContainer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        #bubble:hover {
            cursor: pointer;
        }
    </style>
</head>

<body>
    <div id="svgContainer">
        <svg id="svg" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs">
        <defs id="SvgjsDefs1007"></defs>
        <g id="SvgjsG1008">
            <path id="SvgjsPath1009" d="M751.0000000000002 1976.75L751 2068.75" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1010" transform="translate(742,1954.75)">
            <path id="SvgjsPath1011" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1012">
                <text id="SvgjsText1013" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1014" transform="translate(742,2068.75)">
            <path id="SvgjsPath1015" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1016">
                <text id="SvgjsText1017" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1018" transform="translate(772,2068.75)">
            <path id="SvgjsPath1019" d="M 0 0L 142 0L 142 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1020">
                <text id="SvgjsText1021" font-family="微软雅黑" text-anchor="start" font-size="17px" width="122px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1022" dy="21" x="10">
                        <tspan id="SvgjsTspan1023" >青龙山地铁小镇</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1024" transform="translate(772,1954.75)">
            <path id="SvgjsPath1025" d="M 0 0L 142 0L 142 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1026">
                <text id="SvgjsText1027" font-family="微软雅黑" text-anchor="start" font-size="17px" width="122px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1028" dy="21" x="10">
                        <tspan id="SvgjsTspan1029" >纸坊大街</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1030" transform="translate(772,1846.75)">
            <path id="SvgjsPath1031" d="M 0 0L 142 0L 142 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1032">
                <text id="SvgjsText1033" font-family="微软雅黑" text-anchor="start" font-size="17px" width="122px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1034" dy="21" x="10">
                        <tspan id="SvgjsTspan1035" >北华街</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1036" transform="translate(772,1734.75)">
            <path id="SvgjsPath1037" d="M 0 0L 142 0L 142 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1038">
                <text id="SvgjsText1039" font-family="微软雅黑" text-anchor="start" font-size="17px" width="122px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1040" dy="21" x="10">
                        <tspan id="SvgjsTspan1041" >谭鑫培公园</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1042" transform="translate(772,1625.75)">
            <path id="SvgjsPath1043" d="M 0 0L 142 0L 142 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1044">
                <text id="SvgjsText1045" font-family="微软雅黑" text-anchor="start" font-size="17px" width="122px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1046" dy="21" x="10">
                        <tspan id="SvgjsTspan1047" >江夏客厅</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1048">
            <path id="SvgjsPath1049" d="M751.0000000000002 1868.75L751 1954.75" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1050" transform="translate(742,1846.75)">
            <path id="SvgjsPath1051" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1052">
                <text id="SvgjsText1053" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1054">
            <path id="SvgjsPath1055" d="M751 1756.75L751 1846.75" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1056" transform="translate(742,1734.75)">
            <path id="SvgjsPath1057" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1058">
                <text id="SvgjsText1059" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1060">
            <path id="SvgjsPath1061" d="M751 1647.75L751 1734.75" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1062" transform="translate(742,1625.75)">
            <path id="SvgjsPath1063" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1064">
                <text id="SvgjsText1065" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1066">
            <path id="SvgjsPath1067" d="M751 985.75L751 1075.75" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1068" transform="translate(742,963.75)">
            <path id="SvgjsPath1069" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1070">
                <text id="SvgjsText1071" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1080" transform="translate(742,1183.75)">
            <path id="SvgjsPath1081" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1082">
                <text id="SvgjsText1083" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="湖工大-野芷湖">
            <!-- <path id="SvgjsPath1073" d="M751 1097.75L751 1183.75" stroke="#ff6666" stroke-width="10" fill="none"></path> -->
        
        </g>
        <g id="SvgjsG1074" transform="translate(742,1075.75)">
            <path id="SvgjsPath1075" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1076">
                <text id="SvgjsText1077" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="板桥-野芷湖">
            <!-- <path id="SvgjsPath1079" d="M751.0000000000002 1205.75L751 1293.75" stroke="#ff6666" stroke-width="10" fill="none"></path> -->
        </g>
        
        <g id="SvgjsG1084">
            <path id="SvgjsPath1085" d="M751.0000000000002 1315.75L751 1405.75" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1086" transform="translate(742,1293.75)">
            <path id="SvgjsPath1087" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1088">
                <text id="SvgjsText1089" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1090">
            <path id="SvgjsPath1091" d="M751 1427.75L751 1516.75" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1092" transform="translate(742,1405.75)">
            <path id="SvgjsPath1093" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1094">
                <text id="SvgjsText1095" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1096">
            <path id="SvgjsPath1097" d="M751 1538.75L751 1625.75" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1098" transform="translate(742,1516.75)">
            <path id="SvgjsPath1099" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1100">
                <text id="SvgjsText1101" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1102" transform="translate(772,1516.75)">
            <path id="SvgjsPath1103" d="M 0 0L 142 0L 142 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1104">
                <text id="SvgjsText1105" font-family="微软雅黑" text-anchor="start" font-size="17px" width="122px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1106" dy="21" x="10">
                        <tspan id="SvgjsTspan1107" >大花岭</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1108" transform="translate(772,1405.75)">
            <path id="SvgjsPath1109" d="M 0 0L 142 0L 142 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1110">
                <text id="SvgjsText1111" font-family="微软雅黑" text-anchor="start" font-size="17px" width="122px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1112" dy="21" x="10">
                        <tspan id="SvgjsTspan1113" >新路村</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1114" transform="translate(772,1293.75)">
            <path id="SvgjsPath1115" d="M 0 0L 142 0L 142 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1116">
                <text id="SvgjsText1117" font-family="微软雅黑" text-anchor="start" font-size="17px" width="122px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1118" dy="21" x="10">
                        <tspan id="SvgjsTspan1119" >野芷湖</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1120" transform="translate(772,1183.75)">
            <path id="SvgjsPath1121" d="M 0 0L 142 0L 142 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1122">
                <text id="SvgjsText1123" font-family="微软雅黑" text-anchor="start" font-size="17px" width="122px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1124" dy="21" x="10">
                        <tspan id="SvgjsTspan1125" >板桥</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1126" transform="translate(772,1075.75)">
            <path id="SvgjsPath1127" d="M 0 0L 142 0L 142 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1128">
                <text id="SvgjsText1129" font-family="微软雅黑" text-anchor="start" font-size="17px" width="122px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1130" dy="21" x="10">
                        <tspan id="SvgjsTspan1131" >湖工大</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1132">
            <path id="SvgjsPath1133" d="M751 874.75L751 963.75" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1134" transform="translate(742,852.75)">
            <path id="SvgjsPath1135" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1136">
                <text id="SvgjsText1137" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1138">
            <path id="SvgjsPath1139" d="M751 765.75L751 852.75" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1140" transform="translate(742,743.75)">
            <path id="SvgjsPath1141" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1142">
                <text id="SvgjsText1143" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1144">
            <path id="SvgjsPath1145" d="M751 656.75L751 743.75" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1146" transform="translate(742,634.75)">
            <path id="SvgjsPath1147" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1148">
                <text id="SvgjsText1149" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1150">
            <path id="SvgjsPath1151" d="M751 543.75L751 634.75" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1152" transform="translate(742,521.75)">
            <path id="SvgjsPath1153" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1154">
                <text id="SvgjsText1155" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1156" transform="translate(772,963.75)">
            <path id="SvgjsPath1157" d="M 0 0L 142 0L 142 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1158">
                <text id="SvgjsText1159" font-family="微软雅黑" text-anchor="start" font-size="17px" width="122px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1160" dy="21" x="10">
                        <tspan id="SvgjsTspan1161" >建安街</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1162" transform="translate(772,852.75)">
            <path id="SvgjsPath1163" d="M 0 0L 142 0L 142 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1164">
                <text id="SvgjsText1165" font-family="微软雅黑" text-anchor="start" font-size="17px" width="122px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1166" dy="21" x="10">
                        <tspan id="SvgjsTspan1167" >武昌火车站</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1168" transform="translate(772,743.75)">
            <path id="SvgjsPath1169" d="M 0 0L 142 0L 142 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1170">
                <text id="SvgjsText1171" font-family="微软雅黑" text-anchor="start" font-size="17px" width="122px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1172" dy="21" x="10">
                        <tspan id="SvgjsTspan1173" >小东门</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1174" transform="translate(772,634.75)">
            <path id="SvgjsPath1175" d="M 0 0L 142 0L 142 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1176">
                <text id="SvgjsText1177" font-family="微软雅黑" text-anchor="start" font-size="17px" width="122px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1178" dy="21" x="10">
                        <tspan id="SvgjsTspan1179" >螃蟹岬</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1180" transform="matrix(0.9063077870366499,0.42261826174069944,-0.42261826174069944,0.9063077870366499,773.2907368505054,389.9770499869306)">
            <path id="SvgjsPath1181" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1182">
                <text id="SvgjsText1183" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1184">
            <path id="SvgjsPath1185" d="M772.7262199721426 414.75C 746.3522727272723 506.5 750.1022727272723 459 751 521.75" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1186">
            <path id="SvgjsPath1187" d="M760 302.22238386715276C 813.8522727272723 327.75 816.3522727272723 307.75 780.8711826252579 392.75" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1188" transform="matrix(0.9396926207859084,0.3420201433256687,-0.3420201433256687,0.9396926207859084,746.3049879895092,285.8113961704865)">
            <path id="SvgjsPath1189" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1190">
                <text id="SvgjsText1191" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1192" transform="translate(772,521.75)">
            <path id="SvgjsPath1193" d="M 0 0L 142 0L 142 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1194">
                <text id="SvgjsText1195" font-family="微软雅黑" text-anchor="start" font-size="17px" width="122px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1196" dy="21" x="10">
                        <tspan id="SvgjsTspan1197" >新河街</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1198" transform="translate(799.9132617778566,392.75)">
            <path id="SvgjsPath1199" d="M 0 0L 142 0L 142 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1200">
                <text id="SvgjsText1201" font-family="微软雅黑" text-anchor="start" font-size="17px" width="122px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1202" dy="21" x="10">
                        <tspan id="SvgjsTspan1203" >湖北大学</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1204" transform="translate(563.0903989506907,271.75)">
            <path id="SvgjsPath1205" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1206">
                <text id="SvgjsText1207" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1208">
            <path id="SvgjsPath1209" d="M581.0903989506907 282.75C 713.8522727272723 277.75 677.6022727272725 277.75 742 296.2299970852277" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1210" transform="translate(430,271.75)">
            <path id="SvgjsPath1211" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1212">
                <text id="SvgjsText1213" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1214">
            <path id="SvgjsPath1215" d="M448 282.75000000000006L563.0903989506907 282.75" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1216" transform="matrix(0.9848077530122082,-0.17364817766692953,0.17364817766692953,0.9848077530122082,338.81699333496016,302.45614460493056)">
            <path id="SvgjsPath1217" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1218">
                <text id="SvgjsText1219" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1220">
            <path id="SvgjsPath1221" d="M358.59039895069066 310.20498322442046L430 282.75" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1222" transform="translate(268.28975567894736,323.7651922469878)">
            <path id="SvgjsPath1223" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1224">
                <text id="SvgjsText1225" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1226">
            <path id="SvgjsPath1227" d="M286.4171803231808 334.82992915050886L340.59039895069066 313.24739772796005" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1228" transform="translate(180.9708337332993,324.75)">
            <path id="SvgjsPath1229" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1230">
                <text id="SvgjsText1231" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1232">
            <path id="SvgjsPath1233" d="M268.1551026953741 334.7414492929509L198.9708337332993 335.75" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1234" transform="translate(25,228.50000000000003)">
            <path id="SvgjsPath1235" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1236">
                <text id="SvgjsText1237" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1238">
            <path id="SvgjsPath1239" d="M180.9708337332993 335.75C 109.304347826087 339.054347826087 33.6521739130435 337.3152173913044 34 250.5" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1240">
            <path id="SvgjsPath1241" d="M34 148.75L34 228.50000000000003" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1242" transform="translate(25,126.75)">
            <path id="SvgjsPath1243" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1244">
                <text id="SvgjsText1245" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1246">
            <path id="SvgjsPath1247" d="M34 47L34 126.75" stroke="#ff6666" stroke-width="10" fill="none"></path>
        </g>
        <g id="SvgjsG1248" transform="translate(25,25)">
            <path id="SvgjsPath1249" d="M 0 11C 0 -3.6666666666666665 18 -3.6666666666666665 18 11C 18 25.666666666666668 0 25.666666666666668 0 11Z" stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <g id="SvgjsG1250">
                <text id="SvgjsText1251" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="0" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" opacity="1" y="1.05" transform="rotate(0)"></text>
            </g>
        </g>
        <g id="SvgjsG1252" transform="translate(755.5,271.75)">
            <path id="SvgjsPath1253" d="M 0 0L 175 0L 175 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1254">
                <text id="SvgjsText1255" font-family="微软雅黑" text-anchor="start" font-size="17px" width="155px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1256" dy="21" x="10">
                        <tspan id="SvgjsTspan1257" >徐家棚（7号线）</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1258" transform="translate(538.3290731671307,247.75)">
            <path id="SvgjsPath1259" d="M 0 0L 111.97861914056182 0L 111.97861914056182 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1260">
                <text id="SvgjsText1261" font-family="微软雅黑" text-anchor="start" font-size="17px" width="92px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1262" dy="21" x="10">
                        <tspan id="SvgjsTspan1263" >三阳路</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1264" transform="translate(402.7938391703592,247.75)">
            <path id="SvgjsPath1265" d="M 0 0L 109.05231467579472 0L 109.05231467579472 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1266">
                <text id="SvgjsText1267" font-family="微软雅黑" text-anchor="start" font-size="17px" width="90px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1268" dy="21" x="10">
                        <tspan id="SvgjsTspan1269" >香港路</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1270" transform="translate(351.5,315.6582225062689)">
            <path id="SvgjsPath1271" d="M 0 0L 175 0L 175 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1272">
                <text id="SvgjsText1273" font-family="微软雅黑" text-anchor="start" font-size="17px" width="155px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1274" dy="21" x="10">
                        <tspan id="SvgjsTspan1275" >取水楼</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1276" transform="translate(238.46893330699174,351.863412712552)">
            <path id="SvgjsPath1277" d="M 0 0L 175 0L 175 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1278">
                <text id="SvgjsText1279" font-family="微软雅黑" text-anchor="start" font-size="17px" width="155px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1280" dy="21" x="10">
                        <tspan id="SvgjsTspan1281" >王家墩东</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1282" transform="translate(139.7276745657315,301.8298163725872)">
            <path id="SvgjsPath1283" d="M 0 0L 175 0L 175 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1284">
                <text id="SvgjsText1285" font-family="微软雅黑" text-anchor="start" font-size="17px" width="155px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1286" dy="21" x="10">
                        <tspan id="SvgjsTspan1287" >武汉商务区</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1288" transform="translate(48.923076923076565,230.1346153846155)">
            <path id="SvgjsPath1289" d="M 0 0L 142 0L 142 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1290">
                <text id="SvgjsText1291" font-family="微软雅黑" text-anchor="start" font-size="17px" width="122px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1292" dy="21" x="10">
                        <tspan id="SvgjsTspan1293" >常码头</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1294" transform="translate(50.5350104772653,125.51923076923077)">
            <path id="SvgjsPath1295" d="M 0 0L 142 0L 142 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1296">
                <text id="SvgjsText1297" font-family="微软雅黑" text-anchor="start" font-size="17px" width="122px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1298" dy="21" x="10">
                        <tspan id="SvgjsTspan1299" >园博园</tspan>
                    </tspan>
                </text>
            </g>
        </g>
        <g id="SvgjsG1300" transform="translate(48.91776759815991,27.057692307692406)">
            <path id="SvgjsPath1301" d="M 0 0L 142 0L 142 22L 0 22Z" stroke="none" fill="none"></path>
            <g id="SvgjsG1302">
                <text id="SvgjsText1303" font-family="微软雅黑" text-anchor="start" font-size="17px" width="122px" fill="#ffffff" font-weight="700" align="middle" anchor="start" family="微软雅黑" size="17px" weight="700" font-style="" opacity="1" y="-2.05" transform="rotate(0)">
                    <tspan id="SvgjsTspan1304" dy="21" x="10">
                        <tspan id="SvgjsTspan1305" >园博园北</tspan>
                    </tspan>
                </text>
            </g>
        </g>
                                    
        <g id="bubble">
            <path id="SvgjsPath1615"
                  d="M 0 35L 16.666666666666668 0L 83.33333333333333 0L 100 35L 83.33333333333333 70L 16.666666666666668 70L 0 35Z"
                  stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ff0000"></path>
            <g id="SvgjsG1616">
                <text id="SvgjsText1617" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="80px"
                      fill="#ffff99" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="16px" weight="400"
                      font-style="" opacity="1" y="22.6" transform="rotate(0)">
                    <tspan id="SvgjsTspan1618" dy="20" x="50">
                        <tspan id="SvgjsTspan1619">检测到入侵</tspan>
                    </tspan>
                </text>
            </g>
            <g id="bubble_cancel">
                <circle  id="bubble_cancel_circle"   r="5"  cx="100" cy="0" fill="#ff0000"/>
                <line stroke-linecap="null" x1="97.5" y1="-2.5" x2="102.5" y2="2.5" stroke-linejoin="null" id="bubble_cancel_cha1"  fill-opacity="null" stroke-opacity="null" stroke-width="1" stroke="#000" fill="none"/>
                <line stroke-linecap="null" x1="97.5" y1="2.5" x2="102.5" y2="-2.5" stroke-linejoin="null" id="bubble_cancel_cha2"  fill-opacity="null" stroke-opacity="null" stroke-width="1" stroke="#000" fill="none"/>
            </g>

            <path id="bubble_tail"  stroke="#ff0000" stroke-width="2"
                d="M 100 35 L151 35"
                      fill="none">
            </path>
        </g>     
                      
        
        <g id="train" transform="translate(890,1260)">
            <path id="SvgjsPath1307"
            d="M 0 9.25 L9.25 0 L46.25 0 L55.5 9.25 L55.5 66.98013472401306 L0 66.98013472401306 L0 9.25 Z"
            stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ff6666"></path>
            <path id="SvgjsPath1311"
                  d="M6 9.25 L9.25 6 L46.25 6 L49.5 9.25 L49.5 35.5 L6 35.5 L6 9.25 Z"
                  stroke="rgba(255,102,102,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path>
            <rect width="10" height="10" x="39.5" y="42" rx="3" ry="3"
                  style="fill:#ffffff;stroke-width:1;
                  stroke:rgba(255,102,102,1)"/>

            <rect width="10" height="10" x="6" y="42" rx="3" ry="3"
                  style="fill:#ffffff;stroke-width:1;
                  stroke:rgba(255,102,102,1)"/>
            
            <rect width="43.5" height="10" x="6" y="55" rx="3" ry="3"
                  style="fill:#ffffff;stroke-width:1;
                  stroke:rgba(255,102,102,1)"/>
        </g>  
    </svg>
    </div>

</body>
<script type="text/javascript">
    $(document).ready(function() {
        var bubble = $("#bubble");
        var bubble_tail = $("#bubble_tail");
        var bubble_cancel = $("#bubble_cancel");
        var train = $("#train");
        //湖工大-板桥的传感器数量
        var sensorNum = 530;
        //避免websocket重复连接
        var socketLock = false;
        //提示框初始最高位置和火车的初始最低位置
        var bubble_init_translateXY = [600, 1063];
        var train_init_translateXY = [890, 1260];
        //提示框和火车的当前位置
        var bubble_curr_translateXY = [600, 1063];
        var train_curr_translateXY = [890, 1260];
        //湖工大-野芷湖线段的x，y1，y2
        var hg_yzh_X = 751;
        var hg_yzh_Y = [1097.75, 1293.75];
        //当前缩放的比例
        var scale = 1;

        bubble_config();
        dragAndZoom();
        intr_traInfo_webSocket();
        draw($("#湖工大-野芷湖")[0], hg_yzh_Y[0], hg_yzh_Y[1], sensorNum, 0);

        // setInterval(function() {
        //     barrierDetection(Math.ceil(Math.random() * 500));
        // }, 2000);
        //barrierDetection(529);


        //提示框的配置
        function bubble_config() {
            bubble.hide();
            bubble_cancel.click(function(e) {
                e.stopPropagation(); //防止运行父级元素的点击事件
                bubble.hide();
            });
        }

        /*
         *绘制sensorNum个line，模拟sensorNum个传感器
         *parent要为dom对象；创建组件要用svg的方式;senStart为传感器编号的起始
         */
        function draw(parent, start, end, sensorNum, senStart) {
            let gap = (end - start) / sensorNum; //每个线段的长度
            for (let i = 0, j = senStart; i < sensorNum; i++, j++) {
                let newElement = document.createElementNS("http://www.w3.org/2000/svg", 'path'); //Create a path in SVG's namespace
                newElement.setAttribute("d", `M${hg_yzh_X} ${start + i * gap} L${hg_yzh_X} ${start + (i + 1) * gap + 0.001}`);
                newElement.setAttribute("id", j);
                newElement.style.stroke = "#ff6666"; //Set stroke colour
                newElement.style.strokeWidth = "10px"; //Set stroke width
                newElement.style.fill = "none";
                newElement.style.shapeRendering = "crispEdges"; //消除抗锯齿
                parent.appendChild(newElement);
            }
        }

        //障碍检测,并在相应的地方显示
        function barrierDetection(position) {
            let x = 900;
            let y;
            let gap = (position) * (hg_yzh_Y[1] - hg_yzh_Y[0]) / sensorNum;
            y = bubble_init_translateXY[1] + gap;
            bubble.attr({
                "transform": `translate(${bubble_init_translateXY[0]},${y})scale(${1/scale})translate(${(scale - 1)* 100},${(scale - 1)* 70/2})`
            });
            bubble_tail.attr({
                "d": `M 100 35 L${100 + 51*scale} 35`
            });
            bubble.show();
            bubble_curr_translateXY = [bubble_init_translateXY[0], y];
            //body.attr("transform", `translate(${body_init_translateXY[0]},${body_init_translateXY[1]})scale(${1/scale})translate(${(scale - 1)* 100},${(scale - 1)* 70/2})`);
            //console.log(body_init_translateXY);
        }

        //连接webSocket，并且设置onopen、onmessage、onclose、onerror事件
        function intr_traInfo_webSocket() {
            var url = "ws://192.168.8.22:80";
            var ws = new WebSocket(url); //申请一个WebSocket对象，参数是服务端地址，同http协议使用http://开头一样，WebSocket协议的url使用ws://开头，另外安全的WebSocket协议使用wss://开头
            ws.onopen = function() {　　 //当WebSocket创建成功时，触发onopen事件
                console.log("intrusion and trainInfo socket connected");　　
            }
            ws.onmessage = function(e) {　　 //当客户端收到服务端发来的消息时，触发onmessage事件，参数e.data包含server传递过来的数据　　
                //处理数据，并存下来
                if (null != e.data && "" != e.data) {
                    console.log(e.data);
                    let strs = e.split('|');
                    let type = strs[0];
                    //为入侵检测 Intrusion|2020-11-30 19:44:00|30|
                    if (type === "Intrusion") {
                        let DT = strs[1];
                        let position = strs[2];
                        let AType = "外部入侵";
                        let url = `/ZcmDB|alarm|insert into Intrusion (DT,position,AType,Remark) values ('${DT}','${position}','${AType}','');|`;
                        //console.log(url);
                        //console.log(window.insertDB(url));
                        window.insertDB(url);
                        barrierDetection(parseInt(position));
                        //点击障碍检测的警告标志，进入新的页面，里面展示障碍的详细信息
                        bubble.unbind("click");
                        bubble.click(function(e) {
                            let jn = {
                                "id": "attack_insp",
                                "title": "入侵检测" + DT,
                                "date": DT,
                                "position": position,
                                "AType": AType,
                                "webSrc": null,
                            }
                            jn.webSrc = `./attack_insp.html?id=${jn.id}&title=${jn.title}&date=${jn.date}&position=${jn.position}&AType=${jn.AType}`;
                            new parent.newWindow($('#desktop', parent.document).get(0), $('#taskIcon', parent.document).get(0), 'desk1window' + jn.id, jn).init();
                        });
                    } else if (type === "Arrival") { //为列车信息 Arrival|1|0|0|7|11001010|
                        let solverId = strs[1];
                        let channel = strs[2];　
                        let start = parseInt(strs[3]);　
                        let end = parseInt(strs[4]);
                        let isArrived = strs[5];

                        let first = -1; //标记第一个1的位置，若为-1，表示不存在
                        for (let i = 0; i < isArrived.length; i++) {
                            let flag = parseInt(isArrived[i]);
                            if (flag == 1) {
                                first = i;
                                break;
                            }
                        }
                        if (first != -1) {
                            let gap = (sensorNum - start - first) * (hg_yzh_Y[1] - hg_yzh_Y[0]) / sensorNum;
                            //修改列车位置
                            train.attr("transform", `translate(${train_init_translateXY[0]},${train_init_translateXY[1] - gap})scale(${1/scale})translate(${-1 * (scale - 1)* 55.5},${(scale - 1)* 66.98/2})`);
                            train_curr_translateXY = [train_init_translateXY[0], train_init_translateXY[1] - gap];
                        } else {
                            first = isArrived.length;
                        }
                        for (let i = 0; i < first; i++) {
                            $("#" + (start + i)).css("stroke", "rgb(255, 102, 102)");
                        }
                        for (let i = first; i < isArrived.length; i++) {
                            let flag = parseInt(isArrived[i]);
                            if (flag == 1) { //列车已到达
                                $("#" + (start + i)).css("stroke", "rgb(255, 255, 0)");
                            } else {
                                $("#" + (start + i)).css("stroke", "rgb(255, 102, 102)");
                            }
                        }
                    }
                }
            }
            ws.onclose = function(e) {　　 //当客户端收到服务端发送的关闭连接请求时，触发onclose事件　　
                console.log("intrusion and trainInfo socket close");
                socketRecn();
            }
            ws.onerror = function(e) {　　 //如果出现连接、处理、接收、发送数据失败的时候触发onerror事件　
                console.log("intrusion and trainInfo socket error");
                socketRecn();
            }
        }

        //若websocket断开或出错，尝试重新连接
        function socketRecn() {
            if (socketLock) return;
            socketLock = true;
            //没连接上会一直重连，设置延迟避免请求过多
            setTimeout(function() {
                intr_traInfo_webSocket();
                socketLock = false;
            }, 1000);
        }

        //让svg图像可拖住，可放大缩小
        function dragAndZoom() {
            const svgContainer = document.getElementById("svgContainer");
            const svg = document.getElementById("svg");
            var viewBox = {
                x: 0,
                y: 868,
                w: svgContainer.clientWidth,
                h: svgContainer.clientHeight
            };
            //`${}`方式可以方便字符串拼接
            svg.setAttribute('viewBox', `${viewBox.x} ${viewBox.y} ${viewBox.w} ${viewBox.h}`);
            //记录初始的高和宽度
            const svgSize = {
                w: svgContainer.clientWidth,
                h: svgContainer.clientHeight
            };
            var isPanning = false;
            var startPoint = {
                x: 0,
                y: 0
            };
            var endPoint = {
                x: 0,
                y: 0
            };

            svgContainer.onmousewheel = function(e) {
                e.preventDefault();
                var w = viewBox.w;
                var h = viewBox.h;
                var mx = e.offsetX; //mouse x  
                var my = e.offsetY;
                var dw = w * Math.sign(e.deltaY) * 0.04; //以svg为基准，应该移动的距离
                var dh = h * Math.sign(e.deltaY) * 0.04;
                var dx = dw * mx / svgSize.w; //以svgContainer为基准，应该移动的距离
                var dy = dh * my / svgSize.h;
                //限制缩放的比例
                // if (viewBox.w + dw < svgSize.w * 2 && viewBox.w + dw > svgSize.w * 0.5) {
                //     viewBox = {
                //         x: viewBox.x - dx,
                //         y: viewBox.y - dy,
                //         w: viewBox.w + dw,
                //         h: viewBox.h + dh
                //     };
                // }
                viewBox = {
                    x: viewBox.x - dx,
                    y: viewBox.y - dy,
                    w: viewBox.w + dw,
                    h: viewBox.h + dh
                };
                scale = svgSize.w / viewBox.w;
                svg.setAttribute('viewBox', `${viewBox.x} ${viewBox.y} ${viewBox.w} ${viewBox.h}`);
                bubble.attr("transform", `translate(${bubble_curr_translateXY[0]},${bubble_curr_translateXY[1]})scale(${1/scale})translate(${(scale - 1)* 100},${(scale - 1)* 70/2})`);
                bubble_tail.attr({
                    "d": `M 100 35 L${100 + 51*scale} 35`
                });
                train.attr("transform", `translate(${train_curr_translateXY[0]},${train_curr_translateXY[1]})scale(${1/scale})translate(${-1 * (scale - 1)* 55.5},${(scale - 1)* 66.98/2})`);
            }


            svgContainer.onmousedown = function(e) {
                $(this).css("cursor", "default");
                isPanning = true;
                startPoint = {
                    x: e.x,
                    y: e.y
                };
            }

            svgContainer.onmousemove = function(e) {
                if (isPanning) {
                    $(this).css("cursor", "move");
                    endPoint = {
                        x: e.x,
                        y: e.y
                    };
                    var dx = (startPoint.x - endPoint.x) / scale;
                    var dy = (startPoint.y - endPoint.y) / scale;
                    var movedViewBox = {
                        x: viewBox.x + dx,
                        y: viewBox.y + dy,
                        w: viewBox.w,
                        h: viewBox.h
                    };
                    svg.setAttribute('viewBox', `${movedViewBox.x} ${movedViewBox.y} ${movedViewBox.w} ${movedViewBox.h}`);
                }
            }

            svgContainer.onmouseup = function(e) {
                if (isPanning) {
                    $(this).css("cursor", "default");
                    endPoint = {
                        x: e.x,
                        y: e.y
                    };
                    var dx = (startPoint.x - endPoint.x) / scale;
                    var dy = (startPoint.y - endPoint.y) / scale;
                    viewBox = {
                        x: viewBox.x + dx,
                        y: viewBox.y + dy,
                        w: viewBox.w,
                        h: viewBox.h
                    };
                    svg.setAttribute('viewBox', `${viewBox.x} ${viewBox.y} ${viewBox.w} ${viewBox.h}`);
                    isPanning = false;
                }
            }

            svgContainer.onmouseleave = function(e) {
                isPanning = false;
            }
        }

        //将transform中translate属性中的x，y分离出来，以数组的形式返回
        function getTranslateXY(transform) { //translate(600,1061.1198113207547)
            let x, y;
            let index_comma = transform.indexOf(",");
            let left = transform.indexOf("(");
            x = transform.slice(left + 1, index_comma);
            y = transform.slice(index_comma + 1, transform.length - 1);
            return [parseFloat(x), parseFloat(y)];
        }
    });
</script>

</html>